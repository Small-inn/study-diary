## 高级 JS 进阶

### 执行上下文与调用栈

1. 什么是执行上下文： 就是执行代码的环境
2. 执行上下文的分类
   - 全局上下文
   - 函数上下文
   - EVAL 执行上下文

3. 全局上下文的创建和组成
   - 当 JS 脚本跑起来的时候，第一个被创建的的执行上下文就是全局上下文，一般的全局上下文里面有：
     - 全局对象 （浏览器是 Window，node 里面是 Global）
     - this 变量。this 指向的还是全局变量
   - 每个执行上下文都会经历的生命周期
     - 创建阶段，准备工作
     - 执行阶段，逐行执行脚本代码
   - 创建阶段 JS 引擎主要做了：
     - 创建全局对象
     - 创建 this，并指向全局对象
     - 给变量分配内存空间
     - 默认的给变量赋值 undefined，函数声明放入内存
     - 创建作用域链
4. 函数上下文的创建和组成
   - 函数上下文机制与全局上下文基本一致，主要不同点：
     - 创建的时机：全局上下文在进入脚本就被创建，函数上下文则是在函数调用的时候被创建
     - 创建的频率：全局上下文仅在代码刚开始的时候创建一次，函数上下文则是被调用多少来决定
     - 创建阶段的工作内容：函数上下文不会创建全局对象（Window），而是创建参数对象（arguments）；创建出的 this 不再死死指向全局对象，而是取决于该函数是如何被调用的 —— 如果它被一个引用对象调用，那么 this 就指向这个对象；否则，this 的值会被设置为全局对象或者 undefined（在严格模式下）
5. 调用栈
   - JS 引擎会为我们创建‘执行上下文’（也叫调用栈），函数的上下文有很多个，当一个函数执行完毕之后，对应的上下文要让出所占用的资源，因此上下文的建立和销毁，对应了‘入栈’和‘出栈’
